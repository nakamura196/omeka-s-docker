# Omeka S Docker の紹介：デジタルコレクションのための最新かつセキュアなソリューション

Omeka S Docker へようこそ！このプロジェクトは、大学、ギャラリー、図書館、アーカイブ、博物館向けの Web パブリケーションシステムである Omeka S の本番環境対応 Docker セットアップを提供します。

📦 **GitHub リポジトリ**: [https://github.com/nakamura196/omeka-s-docker](https://github.com/nakamura196/omeka-s-docker)

## なぜ Omeka S Docker なのか？

デジタルコレクションの管理は複雑である必要はありません。そのため、Omeka S のデプロイと管理を簡素化する Docker ベースのソリューションを作成しました。

### 主な機能

- **🚀 クイックセットアップ**: シングルコマンドで数分以内に Omeka S を稼働
- **🔒 セキュリティファースト**: 非 root コンテナとセキュアなデフォルト設定を含むセキュリティベストプラクティスで構築
- **📦 モジュール管理**: 人気の Omeka S モジュールの自動インストールとアップデート
- **🔄 簡単なアップグレード**: データの永続性を保ちながらシームレスなバージョンアップグレード
- **🐳 本番環境対応**: 開発環境と本番環境の両方に最適化
- **🌐 Traefik 統合**: リバースプロキシと SSL 終端のビルトインサポート

## はじめに

### 前提条件
- Docker と Docker Compose がインストールされていること
- コマンドラインの基本的な知識
- （オプション）SSL 付き本番環境デプロイ用のドメイン名

### セットアップオプションの理解

この Docker セットアップは2つのデプロイモードを提供します：

1. **ローカル開発環境** - テスト、開発、小規模デプロイメントに最適
2. **Traefik を使用した本番環境** - 自動 SSL 証明書付きの公開サイト向け

### ローカル開発環境のセットアップ

ローカルセットアップは以下の用途に最適です：
- 本番環境デプロイ前の Omeka S のテスト
- 開発やカスタマイズ作業
- 組織内での内部利用
- 公開アクセスが不要な小規模プロジェクト

#### ローカル開発のクイックスタート

1. リポジトリをクローン：
   ```bash
   git clone https://github.com/nakamura196/omeka-s-docker.git
   cd omeka-s-docker
   ```

2. 環境を設定：
   ```bash
   cp .env.example .env
   # .env ファイルを編集して設定を行う
   ```

3. サービスを起動：
   ```bash
   docker-compose up -d
   ```

4. サービスにアクセス：
   - Omeka S: `http://localhost`
   - phpMyAdmin（データベース管理）: `http://localhost:8080`
   - Mailpit（メールテスト）: `http://localhost:8025`

### Traefik を使用した本番環境セットアップ

公開デプロイメントには、リバースプロキシとして Traefik を使用します。Traefik は、マイクロサービスのデプロイを簡単にする最新の HTTP リバースプロキシおよびロードバランサーです。主な利点：

- **Let's Encrypt からの自動 SSL/TLS 証明書**（無料！）
- **自動証明書更新** - 手動介入不要
- **ビルトインセキュリティヘッダー** - より良い保護のため
- **サービス監視用ダッシュボード**
- **Docker 統合** - サービスを自動的に検出

#### リバースプロキシとは？

リバースプロキシは、インターネットと Web アプリケーションの間に位置し、以下を処理します：
- SSL 終端（HTTPS 暗号化/復号化）
- 複数のコンテナ間でのロードバランシング
- セキュリティヘッダーとアクセス制御
- 正しいサービスへのリクエストルーティング

#### 本番環境のクイックスタート

1. ドメインを設定：
   - ドメイン（例：`omeka.yourdomain.com`）をサーバーの IP アドレスに向ける
   - ファイアウォールでポート 80 と 443 が開いていることを確認

2. 本番環境を設定：
   ```bash
   cp .env.omeka.example .env.omeka
   nano .env.omeka  # ドメインと認証情報を設定
   ```

   設定すべき主要な項目：
   ```env
   DOMAIN=omeka.yourdomain.com
   ACME_EMAIL=your-email@example.com  # SSL 証明書通知用
   ```

3. セットアップスクリプトを実行：
   ```bash
   ./setup-omeka-traefik.sh
   ```

4. モジュールとテーマをインストール：
   ```bash
   ./install-modules.sh
   ```

5. 本番サイトにアクセス：
   - Omeka S: `https://omeka.yourdomain.com`（注意：HTTPS！）
   - Traefik ダッシュボード: `https://traefik.yourdomain.com`

## アーキテクチャ

スタックは3つの主要コンポーネントで構成されています：

- **Omeka S アプリケーション**: PHP-FPM を実行するメインアプリケーションコンテナ
- **MariaDB**: コレクションとメタデータを保存するデータベース
- **Nginx**: アプリケーションを提供する Web サーバー

### セキュリティ機能

- 非 root ユーザー実行
- 可能な限り読み取り専用のルートファイルシステム
- セキュアな環境変数の処理
- サービス間のネットワーク分離
- 定期的なセキュリティアップデート

## モジュール管理

際立った機能の1つは、自動化されたモジュール管理です。含まれているスクリプトは以下を処理します：

- ImageServer、CSVImport、FileSideload などの人気モジュールのインストール
- モジュールを最新バージョンに保つ
- モジュールの依存関係の管理

## 本番環境デプロイの詳細

### なぜ Traefik を選ぶのか？

Web アプリケーションを本番環境にデプロイする際、以下の課題に対処する必要があります：
- **SSL/TLS 暗号化** - セキュリティと SEO のために必須
- **証明書管理** - SSL 証明書の取得と更新
- **複数サービス** - 1つのサーバーで複数のアプリケーションを実行
- **セキュリティヘッダー** - 一般的な Web 脆弱性からの保護

Traefik はこれらすべてを自動的に処理し、設定とメンテナンスの時間を大幅に節約します。

### 本番環境の機能

本番環境セットアップには以下が含まれます：

- **Let's Encrypt による自動 SSL 証明書**
- **ヘルスチェック** - サービスの稼働確認
- **監視ダッシュボード** - サービスステータスの追跡
- **データのバックアップ戦略**
- **大規模コレクション対応のパフォーマンス最適化**

### セキュリティに関する考慮事項

本番環境セットアップは、いくつかのセキュリティベストプラクティスを実装しています：
- 非 root コンテナ実行
- サービス間のネットワーク分離
- セキュアな環境変数の処理
- 定期的なセキュリティアップデート
- HSTS ヘッダー付きの HTTPS のみのアクセス

## コミュニティとサポート

私たちはコミュニティコラボレーションの力を信じています。以下のような貢献を歓迎します：

- バグの報告
- 機能の提案
- コードの貢献
- ユースケースの共有

あなたの意見は、Omeka S Docker をすべての人にとってより良いものにするのに役立ちます。

## 今後の展開

Omeka S Docker を継続的に改善しています：

- 強化されたモニタリング機能
- Kubernetes デプロイメントオプション
- 自動バックアップソリューション
- パフォーマンス最適化

## 参加方法

このプロジェクトはオープンソースで、コミュニティからの貢献を歓迎しています。GitHub リポジトリにアクセスして：

- 🐛 バグや問題を報告
- 💡 新機能を提案
- 🤝 コードの改善に貢献
- ⭐ プロジェクトが役立つと思ったらスターを付ける

**リポジトリ**: [https://github.com/nakamura196/omeka-s-docker](https://github.com/nakamura196/omeka-s-docker)

どんなに小さな貢献でも、価値があり感謝されます。

## まとめ

Omeka S Docker は、デジタルコレクション管理をアクセシブルで、セキュアで、効率的にすることへの私たちのコミットメントを表しています。小規模なアーカイブから大規模な機関まで、このソリューションはシンプルさを維持しながらニーズに合わせてスケールします。

今すぐ Omeka S Docker でデジタルコレクションの構築を始めましょう！

---

*詳細なドキュメントについては、[GitHub リポジトリ](https://github.com/nakamura196/omeka-s-docker) をご覧いただくか、ヘルプが必要な場合は issue を開いてください。*